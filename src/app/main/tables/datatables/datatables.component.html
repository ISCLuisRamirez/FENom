<div class="content-wrapper container-xxl p-0">
  <div class="content-body">
    <!-- Tabla en proceso -->
    <section id="ngx-datatable-kitchen-sink">
      <core-card-snippet [snippetCode]="_snippetCodeKitchenSink">
        <h3 class="card-title text-primary">Denuncia Protegida</h3>
        <div class="row">
          <!-- Filtro para mostrar solicitudes -->
          <div class="col-md-3 col-12">
            <div class="d-flex align-items-center">
              <label class="d-flex align-items-center" style="margin-left:15%;">
                Mostrar
                <select class="form-control mx-25" [(ngModel)]="basicSelectedOption">
                  <option value="10">10</option>
                  <option value="25">25</option>
                  <option value="50">50</option>
                  <option value="100">100</option>
                </select>
                solicitudes
              </label>
            </div>
          </div>

          <!-- Filtro de búsqueda por folio -->
          <div class="col-md-3 col-12">
            <div class="d-flex align-items-center justify-content-end pr-1 pb-1 pl-1 pl-md-0 pb-md-0 w-100">
              <label class="d-flex align-items-center">
                Búsqueda por folio: 
                <input
                  type="search"
                  placeholder="Buscar folio..."
                  class="form-control ml-25"
                  (keyup)="filterUpdate($event)"
                  (search)="filterUpdate($event)"
                />
              </label>
            </div>
          </div>

          <!-- Filtro por estatus -->
          <div class="col-md-3 col-12">
            <div class="d-flex align-items-center justify-content-end pr-1 pb-1 pl-1 pl-md-0 pb-md-0 w-100">
              <label class="d-flex align-items-center">
                Filtro por Estatus: 
                <select class="form-control ml-25" [(ngModel)]="selectedStatus" (change)="filterByStatus()">
                  <option value="">Todos</option>
                  <option value="1">En proceso</option>
                  <option value="2">Abierto</option>
                  <option value="3">Cerrado</option>
                </select>
              </label>
            </div>
          </div>
        </div><br><br>
        
        <ngx-datatable
          [rows]="filteredRows"
          [rowHeight]="58"
          class="bootstrap core-bootstrap"
          [limit]="10"
          [columnMode]="ColumnMode.force"
          [headerHeight]="40"
          [footerHeight]="50"
          [scrollbarH]="true"
          [selectionType]="SelectionType.checkbox"
          [limit]="basicSelectedOption"
          (activate)="onActivate($event)"
          (select)="onSelect($event)"
        >
          <ngx-datatable-column name="ID" prop="id" [sortable]="true" [draggable]="false" [resizeable]="false" [width]="80" [canAutoResize]="false">
          </ngx-datatable-column>
          <ngx-datatable-column name="Folio" prop="folio" [draggable]="false" [resizeable]="false"></ngx-datatable-column>
          <ngx-datatable-column name="Fecha" prop="date" [draggable]="false" [resizeable]="false"></ngx-datatable-column>
          <ngx-datatable-column name="Estatus" prop="status" [draggable]="false" [resizeable]="false">
            <ng-template let-status="value" ngx-datatable-cell-template>
              <div class="badge badge-pill" [ngClass]="{
                'badge-light-primary': status == '1',
                'badge-light-success': status == '2',
                'badge-light-danger': status == '3'
              }">
                {{
                  status == 1
                    ? 'En proceso'
                    : status == 2
                    ? 'Abierto'
                    : status == 3
                    ? 'Cerrado'
                    : 'ERROR'
                }}
              </div>
            </ng-template>
          </ngx-datatable-column>
          <ngx-datatable-column name="Detalles" [width]="120" [sortable]="false" [canAutoResize]="false">
            <ng-template ngx-datatable-cell-template>
              <div class="d-flex align-items-center">
                <button class="btn btn-primary" [routerLink]="'/apps/user/user-view'">Revisar</button>
              </div>              
            </ng-template>
          </ngx-datatable-column>
        </ngx-datatable>
      </core-card-snippet>
    </section>
  </div>
</div>
