<div class="content-wrapper container-xxl p-0 mt-0">
  <div class="content-body d-flex justify-content-center align-items-center min-vh-100">
    <section id="faq-search-filter" class="w-100">
      <div class="card mx-auto col-12 col-md-6 p-3 shadow-sm">
        <h2 class="text-primary text-center">Consulta tu estatus</h2>
        <p class="card-text text-center mb-2">Introduce tu folio para consultar el estatus:</p>

        <form class="faq-search-input">
          <label>Introduce el número de folio:</label>
          <div class="mb-2">
            <input 
              type="text"
              [(ngModel)]="folio"
              name="folio"
              class="form-control"
              placeholder="Introduce el folio..."
              required
            />
          </div>

          <div class="mb-2">
            <label class="d-flex align-items-center">
              Introduce tu contraseña:
              <button
                type="button"
                class="btn btn-link p-0 ml-2"
                (click)="toggleInfo()"
                aria-label="Información adicional"
              >
                <i data-feather="info" class="text-primary"></i>
              </button>
            </label>

            <input
              type="password"
              [(ngModel)]="password"
              name="password"
              class="form-control"
              placeholder="Introduce tu contraseña..."
              required
            />

            <small *ngIf="showInfo" class="text-muted">
              La contraseña fue generada automáticamente al enviar tu denuncia.
            </small>
          </div>

          <div class="text-center">
            <p class="card-text mb-2">Resuelve el captcha:</p>
            <div class="d-flex flex-column align-items-center">
              <canvas
                #captchaCanvas
                width="200"
                height="70"
                class="mb-2 border border-secondary rounded"
              ></canvas>
              <button
                type="button"
                class="btn btn-outline-secondary btn-sm"
                (click)="generateCaptcha()"
              >
                Recargar CAPTCHA
              </button>
            </div>
          </div>

          <div class="mt-1">
            <input
              type="text"
              [(ngModel)]="captchaInput"
              name="captcha"
              class="form-control"
              placeholder="Introduce el captcha..."
              (input)="validateCaptcha()"
              required
            />
            <small *ngIf="captchaError" class="text-danger">
              El CAPTCHA no es válido. Inténtalo de nuevo.
            </small>
          </div>

          <div class="text-center mt-4">
            <button
              type="button"
              class="btn btn-primary w-100"
              [disabled]="!isCaptchaValidated || !folio || !password"
              (click)="submitForm()"
            >
              Consultar Estatus
            </button>
            <p class="card-text mt-0 mb-0" style="font-size: xx-small;">
              Responda correctamente el captcha y el botón de envío se activará. El captcha es sensible a mayúsculas y minúsculas.
            </p>
          </div>
        </form>
      </div>
    </section>
  </div>
</div>
